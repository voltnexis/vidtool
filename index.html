<!DOCTYPE html><html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VoltNexis • Any → Any Video Converter</title>
  <meta name="description" content="Convert videos between many formats (MP4, AVI, MOV, WEBM, MKV, more) fully in your browser. Free, fast, private. No backend." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, "Noto Sans", sans-serif; }
    .drop-active { border-color: #22c55e !important; background: rgba(34,197,94,0.06) !important; }
    .thumb { width: 72px; height: 72px; object-fit: cover; border-radius: 0.75rem; }
    .icon-btn { display:inline-flex; align-items:center; justify-content:center; border-radius:0.75rem; padding:0.5rem; border:1px solid rgb(226 232 240); }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800">
  <header class="sticky top-0 z-10 backdrop-blur bg-white/70 border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
      <div class="h-9 w-9 rounded-2xl bg-slate-900 grid place-items-center">
        <img src="logo-icon.png" alt="Icon" class="h-6 w-6 object-contain" />
      </div>
      <div class="flex-1">
        <img src="logo-iconwithname.png" alt="VoltNexis Video Converter" class="h-8 object-contain" />
        <p class="text-xs text-slate-500 -mt-1">Any → Any Video • 100% Front‑End • Private</p>
      </div>
      <a href="https://voltnexis.github.io" class="rounded-2xl bg-slate-900 text-white px-3 py-2 text-sm font-medium hover:bg-slate-800">Main Site ↗</a>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-28 pt-6">
    <section class="grid gap-5 sm:grid-cols-2">
      <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
        <h2 class="font-semibold text-lg">1) Add files (≤ 50 MB each)</h2>
        <div id="dropzone" class="mt-3 rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 flex flex-col items-center justify-center text-center transition">
          <div class="text-sm text-slate-600">Drag & drop videos here</div>
          <div class="text-xs text-slate-500 mt-1">or</div>
          <label class="mt-3 inline-flex items-center gap-2 rounded-xl bg-slate-900 px-4 py-2 text-white cursor-pointer hover:bg-slate-800 active:scale-[0.99]">
            <input id="fileInput" type="file" accept="video/*" multiple class="hidden" />
            <span>Select videos</span>
          </label>
          <p class="text-xs text-slate-500 mt-2">Common inputs: MP4, AVI, MOV, WEBM, MKV, FLV, WMV, 3GP</p>
          <p class="text-xs text-slate-400">Any format supported by your browser.</p>
        </div>
        <div class="mt-3 flex items-center justify-between">
          <div id="status" class="text-sm text-slate-600"></div>
          <button id="clearAll" class="text-sm rounded-xl border px-3 py-1.5 hover:bg-slate-50">Clear All</button>
        </div>
        <ul id="fileList" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"></ul>
      </div>

      <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
        <h2 class="font-semibold text-lg">2) Convert settings</h2>
        <div class="mt-4 grid gap-4">
          <div class="grid grid-cols-[140px_1fr] items-center gap-3">
            <label class="text-sm text-slate-600">Output format</label>
            <select id="format" class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm">
              <option value="video/mp4">MP4 (.mp4)</option>
              <option value="video/webm">WEBM (.webm)</option>
              <option value="video/avi">AVI (.avi)</option>
              <option value="video/mov">MOV (.mov)</option>
              <option value="video/mkv">MKV (.mkv)</option>
              <option value="video/flv">FLV (.flv)</option>
              <option value="video/wmv">WMV (.wmv)</option>
              <option value="video/3gp">3GP (.3gp)</option>
            </select>
          </div>

          <div class="grid grid-cols-[140px_1fr] items-center gap-3">
            <label class="text-sm text-slate-600">Quality</label>
            <input id="quality" type="range" min="0.1" max="1" step="0.1" value="0.8" class="w-full" />
            <span id="qval" class="text-sm">0.8</span>
          </div>

          <button id="convertBtn" class="mt-2 inline-flex items-center justify-center rounded-xl bg-emerald-600 px-4 py-2 text-white font-medium shadow-sm hover:bg-emerald-500 active:scale-[0.99] disabled:opacity-50 disabled:cursor-not-allowed">Convert</button>
        </div>
      </div>
    </section>

    <section class="mt-6 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
      <div class="flex items-center justify-between">
        <h2 class="font-semibold text-lg">3) Results</h2>
        <button id="downloadAll" class="hidden rounded-xl bg-slate-900 text-white px-3 py-2 text-sm font-medium hover:bg-slate-800">Download All (ZIP)</button>
      </div>
      <div id="results" class="mt-4 grid gap-4 md:grid-cols-2"></div>
    </section>

    <footer class="mt-8 text-xs text-slate-500 text-center">
      <p>Video conversion using browser MediaRecorder API. Files never leave your device. ✨</p>
    </footer>
  </main>

  <script>
    const $ = (s) => document.querySelector(s);
    const fileInput = $('#fileInput');
    const dropzone = $('#dropzone');
    const fileList = $('#fileList');
    const formatSel = $('#format');
    const quality = $('#quality');
    const qval = $('#qval');
    const convertBtn = $('#convertBtn');
    const statusEl = $('#status');
    const clearAllBtn = $('#clearAll');
    const results = $('#results');
    const downloadAllBtn = $('#downloadAll');

    const MAX = 50 * 1024 * 1024;
    let files = [];
    let outputs = [];

    const humanSize = (bytes) => {
      const u = ['B','KB','MB','GB'];
      let i = 0, n = bytes;
      while (n >= 1024 && i < u.length-1) { n/=1024; i++; }
      return `${n.toFixed(n < 10 && i>0 ? 1:0)} ${u[i]}`;
    };

    quality.addEventListener('input', () => (qval.textContent = quality.value));

    function addFiles(list) {
      const accepted = [];
      for (const f of list) {
        if (!f.type.startsWith('video/')) { toast(`Skipped non-video: ${f.name}`); continue; }
        if (f.size > MAX) { toast(`Skipped >50MB: ${f.name} (${humanSize(f.size)})`); continue; }
        const url = URL.createObjectURL(f);
        accepted.push({ file:f, url });
      }
      files = files.concat(accepted);
      renderFileList();
    }

    function renderFileList() {
      fileList.innerHTML = '';
      if (!files.length) { fileList.innerHTML = '<li class="text-sm text-slate-500">No files added yet.</li>'; return; }
      for (const [idx, it] of files.entries()) {
        const li = document.createElement('li');
        li.className = 'flex items-center gap-3 rounded-xl border border-slate-200 bg-white p-3';
        const video = document.createElement('video'); 
        video.className = 'thumb'; 
        video.src = it.url; 
        video.muted = true;
        video.preload = 'metadata';
        const meta = document.createElement('div'); meta.className = 'min-w-0 flex-1';
        meta.innerHTML = `<div class="truncate text-sm font-medium">${it.file.name}</div>
                          <div class="text-xs text-slate-500">${it.file.type || 'unknown'} · ${humanSize(it.file.size)}</div>`;
        const rm = document.createElement('button'); rm.className='ml-auto text-xs rounded-lg border px-2 py-1 hover:bg-slate-50'; rm.textContent='Remove';
        rm.onclick = () => { URL.revokeObjectURL(it.url); files.splice(idx,1); renderFileList(); };
        li.append(video, meta, rm); fileList.appendChild(li);
      }
    }

    ['dragenter','dragover'].forEach(evt => dropzone.addEventListener(evt, e => { e.preventDefault(); dropzone.classList.add('drop-active'); }));
    ['dragleave','drop'].forEach(evt => dropzone.addEventListener(evt, e => { e.preventDefault(); dropzone.classList.remove('drop-active'); }));
    dropzone.addEventListener('drop', (e) => addFiles(e.dataTransfer.files));
    fileInput.addEventListener('change', (e) => addFiles(e.target.files));

    function toast(msg) { statusEl.textContent = msg; statusEl.classList.remove('text-emerald-600'); statusEl.classList.add('text-slate-600'); }
    function ok(msg) { statusEl.textContent = msg; statusEl.classList.remove('text-slate-600'); statusEl.classList.add('text-emerald-600'); }

    async function convertVideo(file, outType, qual) {
      const video = document.createElement('video');
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      
      return new Promise((resolve, reject) => {
        video.onloadedmetadata = () => {
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          
          // Try MediaRecorder with fallback
          let mimeType = outType;
          if (!MediaRecorder.isTypeSupported(outType)) {
            mimeType = 'video/webm'; // fallback
          }
          
          const stream = canvas.captureStream(30);
          const mediaRecorder = new MediaRecorder(stream, {
            mimeType,
            videoBitsPerSecond: 1000000 * qual
          });
          
          const chunks = [];
          mediaRecorder.ondataavailable = e => chunks.push(e.data);
          mediaRecorder.onstop = () => {
            const blob = new Blob(chunks, { type: outType });
            resolve(blob);
          };
          
          mediaRecorder.start();
          
          const drawFrame = () => {
            if (!video.paused && !video.ended) {
              ctx.drawImage(video, 0, 0);
              requestAnimationFrame(drawFrame);
            }
          };
          
          video.ontimeupdate = drawFrame;
          video.onended = () => mediaRecorder.stop();
          
          video.play().catch(reject);
        };
        
        video.onerror = reject;
        video.src = URL.createObjectURL(file);
        video.load();
      });
    }

    function renderResult(blob, name) {
      const card = document.createElement('div');
      card.className = 'rounded-xl border border-slate-200 p-3 flex items-center gap-3';

      const video = document.createElement('video'); 
      video.className = 'thumb'; 
      video.src = URL.createObjectURL(blob); 
      video.muted = true;
      video.preload = 'metadata';
      
      const meta = document.createElement('div'); meta.className='min-w-0 flex-1';
      meta.innerHTML = `<div class="text-sm font-medium truncate">${name}</div>
                        <div class="text-xs text-slate-500">${humanSize(blob.size)}</div>`;

      const dl = document.createElement('button'); dl.className='icon-btn'; dl.innerHTML='⬇️';
      dl.onclick = () => saveAs(blob, name);

      card.append(video, meta, dl); results.appendChild(card);
      outputs.push({ name, blob, url: video.src });
      downloadAllBtn.classList.toggle('hidden', outputs.length < 2);
    }

    async function handleConvert() {
      if (!files.length) { toast('Please add some videos first.'); return; }
      convertBtn.disabled = true; results.innerHTML = ''; outputs.forEach(o=>URL.revokeObjectURL(o.url)); outputs = [];

      const outType = formatSel.value;
      const qual = parseFloat(quality.value);

      for (let i=0;i<files.length;i++) {
        const it = files[i];
        statusEl.textContent = `Converting ${i+1}/${files.length}: ${it.file.name}`;
        try {
          const blob = await convertVideo(it.file, outType, qual);
          const ext = outType.split('/')[1];
          const name = it.file.name.replace(/\.[^.]+$/, `.${ext}`);
          renderResult(blob, name);
        } catch (e) {
          console.error(e); toast(`Failed: ${it.file.name}`);
        }
      }
      ok('Done. You can download files below.');
      convertBtn.disabled = false;
    }

    async function downloadAllZip() {
      if (!outputs.length) return;
      const zip = new JSZip();
      for (const o of outputs) zip.file(o.name, o.blob);
      const content = await zip.generateAsync({ type: 'blob' });
      saveAs(content, 'converted_videos.zip');
    }

    function clearAll() {
      for (const f of files) URL.revokeObjectURL(f.url);
      for (const o of outputs) URL.revokeObjectURL(o.url);
      files = []; outputs = []; fileList.innerHTML=''; results.innerHTML=''; statusEl.textContent='';
      downloadAllBtn.classList.add('hidden');
    }

    convertBtn.addEventListener('click', handleConvert);
    downloadAllBtn.addEventListener('click', downloadAllZip);
    clearAllBtn.addEventListener('click', clearAll);
  </script>
</body>
</html>